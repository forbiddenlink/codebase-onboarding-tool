# ============================================================================
# CodeCompass Environment Configuration
# ============================================================================
# Copy this file to .env and customize for your environment
# NEVER commit .env to version control!
#
# Quick Setup:
#   1. cp .env.example .env
#   2. Generate SESSION_SECRET: openssl rand -base64 32
#   3. Add your ANTHROPIC_API_KEY from https://console.anthropic.com
#   4. Update NEXT_PUBLIC_APP_URL to your domain (or keep localhost for dev)
# ============================================================================

# ----------------------------------------------------------------------------
# REQUIRED - Application will not start without these
# ----------------------------------------------------------------------------

# Anthropic Claude API Key
# Get from: https://console.anthropic.com/settings/keys
# Cost: ~$0.003/1K input tokens, ~$0.015/1K output tokens (Claude Sonnet 4)
ANTHROPIC_API_KEY=sk-ant-api03-xxxxx

# Database Connection
# Development (SQLite):
DATABASE_URL="file:./dev.db"
# Production (PostgreSQL with SSL):
# DATABASE_URL="postgresql://user:password@host:5432/codecompass?schema=public&sslmode=require"

# Session Secret - CRITICAL SECURITY
# Generate with: openssl rand -base64 32
# Must be 32+ characters, cryptographically random
# Rotate every 90 days in production
SESSION_SECRET=your-session-secret-change-in-production-must-be-32-chars-minimum

# Application URL - Required for CORS, CSRF, and OAuth
# Development:
NEXT_PUBLIC_APP_URL=http://localhost:3000
# Production:
# NEXT_PUBLIC_APP_URL=https://codecompass.app

# Node Environment
# Values: development | production | test
NODE_ENV=development

# ----------------------------------------------------------------------------
# HIGHLY RECOMMENDED for Production
# ----------------------------------------------------------------------------

# Upstash Redis - For distributed rate limiting and AI response caching
# Sign up at: https://console.upstash.com/
# Free tier: 10,000 commands/day
# Benefits:
#   - Distributed rate limiting across multiple servers
#   - AI response caching (60-70% cost reduction on repeated queries)
#   - In-memory fallback works without this in dev
UPSTASH_REDIS_REST_URL=https://your-redis-instance.upstash.io
UPSTASH_REDIS_REST_TOKEN=your-redis-token-here

# ----------------------------------------------------------------------------
# OPTIONAL - Features work without these
# ----------------------------------------------------------------------------

# GitHub Integration - For cloning private repositories
# Create token at: https://github.com/settings/tokens
# Scopes needed: repo (full control of private repositories)
GITHUB_TOKEN=ghp_xxxxx

# GitHub OAuth - For user authentication via GitHub
# Register app at: https://github.com/settings/applications/new
# GITHUB_CLIENT_ID=xxxxx
# GITHUB_CLIENT_SECRET=xxxxx

# NextAuth.js Compatibility - Legacy support
# Use same value as SESSION_SECRET for backward compatibility
NEXTAUTH_SECRET=your-secret-key-here-change-this-in-production
NEXTAUTH_URL=http://localhost:3000

# ----------------------------------------------------------------------------
# LEGACY / DEPRECATED - Not recommended for new deployments
# ----------------------------------------------------------------------------

# Legacy Rate Limiting (replaced by Upstash Redis)
# These do NOT work across multiple servers/processes
# RATE_LIMIT_MAX_REQUESTS=100
# RATE_LIMIT_WINDOW_MS=900000  # 15 minutes

# ----------------------------------------------------------------------------
# FEATURE FLAGS - Enable/disable specific features
# ----------------------------------------------------------------------------

# Slack Bot Integration (Future feature)
ENABLE_SLACK_BOT=false

# Advanced Code Analysis (Requires additional processing time)
ENABLE_ADVANCED_ANALYSIS=true

# Vector Search for Semantic Code Queries (Experimental)
ENABLE_VECTOR_SEARCH=true

# ----------------------------------------------------------------------------
# OPTIONAL INTEGRATIONS
# ----------------------------------------------------------------------------

# Pinecone Vector Database (Not currently used)
# Sign up at: https://www.pinecone.io/
# PINECONE_API_KEY=xxxxx
# PINECONE_ENVIRONMENT=us-west1-gcp
# PINECONE_INDEX=codecompass

# Sentry Error Tracking (Recommended for production)
# Sign up at: https://sentry.io/
# SENTRY_DSN=https://xxxxx@sentry.io/xxxxx
# SENTRY_ORG=your-org
# SENTRY_PROJECT=codecompass

# ----------------------------------------------------------------------------
# LOGGING & DEBUGGING
# ----------------------------------------------------------------------------

# Log Level - Controls console output verbosity
# Values: error | warn | info | debug
LOG_LEVEL=info

# Analytics Tracking
ENABLE_ANALYTICS=false

# Debug Mode - Enables detailed logs and error messages
# WARNING: Do NOT enable in production (exposes sensitive info)
# DEBUG=false

# ----------------------------------------------------------------------------
# SECURITY CONFIGURATION (Advanced)
# ----------------------------------------------------------------------------

# CORS Allowed Origins (comma-separated)
# Only needed if you're calling the API from different domains
# ALLOWED_ORIGINS=https://app.codecompass.com,https://admin.codecompass.com

# Cookie Security Settings
# COOKIE_SECURE=true        # HTTPS only (auto-enabled in production)
# COOKIE_SAMESITE=strict    # CSRF protection (default: lax)
# COOKIE_MAX_AGE=86400      # Session duration in seconds (default: 24 hours)

# Rate Limit Override (per IP/user)
# AI_RATE_LIMIT_REQUESTS=10          # Requests per minute (default: 10)
# AUTH_RATE_LIMIT_REQUESTS=5         # Auth requests per minute (default: 5)
# REPO_RATE_LIMIT_REQUESTS=30        # Repo operations per minute (default: 30)
# GENERAL_RATE_LIMIT_REQUESTS=60     # General API per minute (default: 60)

# ----------------------------------------------------------------------------
# DEPLOYMENT-SPECIFIC
# ----------------------------------------------------------------------------

# Vercel Deployment
# These are auto-populated by Vercel, no need to set manually
# VERCEL=1
# VERCEL_URL=codecompass-xyz.vercel.app
# VERCEL_ENV=production

# Custom Domain (if using Vercel with custom domain)
# NEXT_PUBLIC_VERCEL_URL=codecompass.app

# ----------------------------------------------------------------------------
# NOTES
# ----------------------------------------------------------------------------
# - Environment variables are validated on application startup
# - Missing REQUIRED variables will cause the app to fail immediately
# - See lib/env.ts for validation logic
# - See DEPLOYMENT_CHECKLIST.md for production setup guide
# - See SECURITY_FIXES_SUMMARY.md for security configuration details
# 
# For help, see:
#   - README.md - General documentation
#   - DEPLOYMENT_CHECKLIST.md - Production deployment guide
#   - https://nextjs.org/docs/pages/building-your-application/configuring/environment-variables
# ============================================================================


# Development Settings
NODE_ENV=development
PORT=3000
